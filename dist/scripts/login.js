function checkLoginStatus(o,e){$.ajax({type:"POST",url:"ajax/check_login.php"}).done(function(n){var a=JSON.parse(n);a.success?o&&o():e!==!0&&(window.location="login.php?url="+encodeURIComponent(window.location))})}function logout(){confirm("If you have unsaved changes logging out will cause you to lose them. Continue?")&&$.ajax({type:"POST",url:"ajax/logout.php"}).done(function(){window.location="login.php"})}!function(){"use strict";function o(){var o=r.value,n=s.value;e(o,n)&&a(o,sha256_digest(n))}function e(o,e){var n="";return $.trim(o)||(n+="Username cannot be blank<br />"),e||(n+="Password cannot be blank<br />"),n?($().toastmessage("showErrorToast",n),!1):!0}function n(o){for(var e=window.location.search.substring(1),n=e.split("&"),a=0;a<n.length;a++){var t=n[a].split("=");if(t[0]==o)return decodeURIComponent(t[1])}return null}function a(o,e){$.ajax({type:"POST",url:"ajax/login.php",data:{username:o,password:e}}).done(function(o){var e=JSON.parse(o);if(e.success){e.homepage&&(homepage=e.homepage);var a=n("url");window.location=a?a:homepage}else $().toastmessage("showErrorToast","Username or password is incorrect")})}var t=document.querySelector("#login-btn"),r=document.querySelector("#username"),s=document.querySelector("#password");t&&(t.addEventListener("click",o),$(document).keypress(function(e){13==e.which&&o()}))}();