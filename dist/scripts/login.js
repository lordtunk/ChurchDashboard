function checkLoginStatus(n,o){$.ajax({type:"POST",url:"ajax/check_login.php"}).done(function(e){var t=JSON.parse(e);t.success?n&&n():o!==!0&&(window.location="index.html?url="+encodeURIComponent(window.location))})}function logout(){confirm("If you have unsaved changes logging out will cause you to lose them. Continue?")&&$.ajax({type:"POST",url:"ajax/logout.php"}).done(function(){window.location="index.html"})}!function(){"use strict";function n(){var n=c.value,e=s.value;o(n,e)&&t(n,$.md5(e))}function o(n,o){var e="";return $.trim(n)||(e+="Username cannot be blank<br />"),o||(e+="Password cannot be blank<br />"),e?($().toastmessage("showErrorToast",e),!1):!0}function e(n){for(var o=window.location.search.substring(1),e=o.split("&"),t=0;t<e.length;t++){var a=e[t].split("=");if(a[0]==n)return decodeURIComponent(a[1])}return null}function t(n,o){$.ajax({type:"POST",url:"ajax/login.php",data:{username:n,password:o}}).done(function(n){var o=JSON.parse(n);if(o.success){var t=e("url");window.location=t?t:"attendance.html"}else $().toastmessage("showErrorToast","Username or password is incorrect")})}function a(){var n=e("url");window.location=n?n:"attendance.html"}var r=document.querySelector("#login-btn"),c=document.querySelector("#username"),s=document.querySelector("#password");r&&(r.addEventListener("click",n),$(document).keypress(function(o){13==o.which&&n()}),checkLoginStatus(a,!0))}();