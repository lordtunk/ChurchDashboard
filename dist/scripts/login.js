function checkLoginStatus(o,n){$.ajax({type:"POST",url:"ajax/check_login.php"}).done(function(e){var t=JSON.parse(e);t.success?o&&o():n!==!0&&(window.location="login.php?url="+encodeURIComponent(window.location))})}function logout(){confirm("If you have unsaved changes logging out will cause you to lose them. Continue?")&&$.ajax({type:"POST",url:"ajax/logout.php"}).done(function(){window.location="login.php"})}!function(){"use strict";function o(){var o=r.value,e=s.value;n(o,e)&&t(o,sha256_digest(e))}function n(o,n){var e="";return $.trim(o)||(e+="Username cannot be blank<br />"),n||(e+="Password cannot be blank<br />"),e?($().toastmessage("showErrorToast",e),!1):!0}function e(o){for(var n=window.location.search.substring(1),e=n.split("&"),t=0;t<e.length;t++){var a=e[t].split("=");if(a[0]==o)return decodeURIComponent(a[1])}return null}function t(o,n){$.ajax({type:"POST",url:"ajax/login.php",data:{username:o,password:n}}).done(function(o){var n=JSON.parse(o);if(n.success){var t=e("url");window.location=t?t:homepage}else $().toastmessage("showErrorToast","Username or password is incorrect")})}var a=document.querySelector("#login-btn"),r=document.querySelector("#username"),s=document.querySelector("#password");a&&(a.addEventListener("click",o),$(document).keypress(function(n){13==n.which&&o()}))}();