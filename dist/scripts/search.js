!function(){"use strict";function e(){var e=$.trim(c.value);""===e?$().toastmessage("showErrorToast","Must enter Name"):t(e)}function t(e){$(".search-form").mask("Loading..."),$.ajax({type:"GET",url:"ajax/search.php",data:{search:e}}).done(function(e){var t=JSON.parse(e);t.success?(r(t.people),$(".search-form").unmask()):1===t.error?logout():$().toastmessage("showErrorToast","Error searching people")}).fail(function(){$().toastmessage("showErrorToast","Error searching people")})}function a(e,t){if(null===e)return"";var a="";return e.first_name||e.last_name?(e.last_name&&(a+=e.last_name),e.last_name&&e.first_name?t===!0?a+=", "+e.first_name:a=e.first_name+" "+a:e.first_name&&(a+=e.first_name+" ")):a=e.description,a}function r(e){$("#search-table tbody tr").remove();for(var t=0;t<e.length;t++)n(e[t])}function n(e){var t=a(e);$("#search-table > tbody:last").append('<tr person_id="'+e.id+'"><td data-th="Name" person_name="'+t+'"><a class="person_name" href="manage-person.php?id='+e.id+'">'+t+'</a></td><td data-th="Email">'+e.email+'</td><td data-th="Address">'+s(e)+"</td></tr>")}function s(e){var t="";return t+=e.street1||"",e.street1&&(t+="<br />"),t+=e.street2||"",e.street2&&(t+="<br />"),t+=e.city||"",e.city&&e.state&&(t+=","),t+=" ",t+=e.state||"",t+=" ",t+=e.zip||"",t.trim()}function o(e){var t=$("#search-table-container"),a=-1==e.target.id.indexOf("top")?t[0].scrollHeight:0;t.stop().animate({scrollTop:a},d,"swing",function(){$("<style></style>").appendTo($(document.body)).remove()})}var i=document.querySelector("#search"),c=document.querySelector("#search-name"),d=1e3;$(".navigation-links a").on("click",o),i.addEventListener("click",e),c.addEventListener("keydown",function(t){13==t.keyCode&&e()})}();