!function(){"use strict";function e(){var e="",a=$.trim(s.value),o=$.trim(u.value);return $.trim(r.value).length>500&&(e+="Email(s) cannot exceed 500 characters<br />"),a.length>500&&(e+="Campus(es) cannot exceed 500 characters<br />"),t(a)||(e+="Campus(es) have incorrect format<br />"),o.length>500&&(e+="Service Label(s) cannot exceed 500 characters<br />"),t(o)||(e+="Service Label(s) have incorrect format<br />"),n.validity.valid||(e+="Default Campus id must be greater than or equal to 1<br />"),i.validity.valid||(e+="Default First Service Label id must be greater than or equal to 1<br />"),l.validity.valid||(e+="Default Second Service Label id must be greater than or equal to 1<br />"),e?($().toastmessage("showErrorToast",e),!1):!0}function t(e){if(0===e.length)return!0;for(var t,a,r=e.split(","),s=0;s<r.length;s++){if(-1===r[s].indexOf("|"))return!1;if(t=r[s].split("|"),a=parseInt(t[0]),isNaN(a)||1>a)return!1;if(""===$.trim(t[1]))return!1}return!0}function a(){e()&&$.ajax({type:"POST",url:"ajax/save_settings.php",data:{startingPointEmails:r.value,campuses:s.value,serviceLabels:u.value,defaultCampus:n.value,defaultFirstServiceLabel:i.value,defaultSecondServiceLabel:l.value}}).done(function(e){var t=JSON.parse(e);t.success?$().toastmessage("showSuccessToast","Settings updated successfully"):1===t.error?logout():2===t.error?window.location="attendance.php":$().toastmessage("showErrorToast","Error updating settings")}).fail(function(){$().toastmessage("showErrorToast","Error updating settings")})}var r=document.querySelector("#starting-point-emails"),s=document.querySelector("#campuses"),u=document.querySelector("#service-labels"),i=document.querySelector("#default-service-label-first"),l=document.querySelector("#default-service-label-second"),n=document.querySelector("#default-campus");document.getElementById("update").addEventListener("click",a)}();