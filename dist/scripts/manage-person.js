!function(){"use strict";function e(e){var t=$("#state");$.each(e,function(e,o){t.append("<option value="+o.abbreviation+">"+o.name+"</option>")}),t.val("OH")}function t(){var e=$("#follow-up-frequency");$.each(rn,function(t,o){e.append("<option value="+t+">"+o+"</option>")}),e.val("")}function o(){var e=$("#follow-up-type");$.each(tn,function(t,o){e.append("<option value="+t+">"+o+"</option>")}),e.val("2"),e=$("#relationship-type"),$.each(on,function(t,o){e.append("<option value="+t+">"+o+"</option>")}),e.val("1"),e=$("#attender-status"),$.each(nn,function(t,o){e.append("<option value="+t+">"+o+"</option>")}),e.val("3")}function n(e){bt.value=e.first_name,kt.value=e.last_name,wt.value=e.description,$t.value=e.first_visit,St.innerHTML=e.first_attendance_dt||'<span style="font-style: italic;">(None)</span>',qt.value=e.attender_status,Et.checked=e.adult,Tt.checked=e.active,xt.checked=e.baptized,At.checked=e.saved,Lt.checked=e.visitor,Ot.checked=e.assigned_agent,Ct.checked=e.starting_point_notified,Mt.value=e.street1,Nt.value=e.street2,jt.value=e.city,Pt.value=e.zip,e.state&&(Rt.value=e.state),Ht.value=e.email,It.value=vt(e.primary_phone),zt.value=e.primary_phone_type,Jt.value=vt(e.secondary_phone),Ft.value=e.secondary_phone_type,r(e),i(e),I(e.follow_ups),F(e.relationships),E()}function r(e){Dt.checked=e.commitment_christ,Ut.checked=e.recommitment_christ,Yt.checked=e.commitment_tithe,Gt.checked=e.commitment_ministry,Vt.checked=e.commitment_baptism,Bt.checked=e.info_next,Zt.checked=e.info_gkids,Kt.checked=e.info_ggroups,Qt.checked=e.info_gteams,Wt.checked=e.info_member,Xt.checked=e.info_visit}function i(e){var t=lt(e);Wo.innerHTML="OH"===t||""===t?"":'<a href="'+en+t+'" target="_blank"><img border="0" src="'+Xo+t+'" /></a>'}function a(){var e={id:person.id,first_name:$.trim(bt.value),last_name:$.trim(kt.value),description:$.trim(wt.value),first_visit:$.trim($t.value),attender_status:qt.value,adult:Et.checked,active:Tt.checked,baptized:xt.checked,saved:At.checked,visitor:Lt.checked,assigned_agent:Ot.checked,street1:$.trim(Mt.value),street2:$.trim(Nt.value),city:$.trim(jt.value),zip:$.trim(Pt.value),state:$.trim(Rt.value),email:$.trim(Ht.value),primary_phone:$.trim(It.value),primary_phone_type:zt.value,secondary_phone:$.trim(Jt.value),secondary_phone_type:Ft.value,commitment_christ:Dt.checked,recommitment_christ:Ut.checked,commitment_tithe:Yt.checked,commitment_ministry:Gt.checked,commitment_baptism:Vt.checked,info_next:Bt.checked,info_gkids:Zt.checked,info_ggroups:Kt.checked,info_gteams:Qt.checked,info_member:Wt.checked,info_visit:Xt.checked};"OH"===$.trim(lt(e))&&(e.state=""),l(e)&&g(e)}function c(){var e=[];return $("#follow-up-table tbody tr").each(function(t,o){var n=o.children[0].getAttribute("typeCd")||"";e.push({id:o.getAttribute("follow_up_id"),typeCd:n,type:tn[n],date:o.children[1].innerHTML||"",comments:o.children[3].innerHTML||"",visitorsIds:o.children[2].getAttribute("visitorsIds").split(",")||"",visitors:o.children[2].innerHTML.split(", ")||""})}),e}function s(){var e=[];return $("#relationship-table tbody tr").each(function(t,o){var n=o.children[0].getAttribute("typeCd")||"";e.push({id:o.getAttribute("relationship_id"),typeCd:n,type:on[n],person_id:person.id,relation_id:o.children[1].getAttribute("relationid"),name:o.children[1].getAttribute("relationname")})}),e}function l(e){var t="",o=!!e.first_name,n=!!e.last_name,r=!!e.description;return!o&&n?t+="First Name cannot be blank if Last Name is specified<br />":o&&!n?t+="Last Name cannot be blank if First Name is specified<br />":o||n||r||(t+="Must specify either First and Last Name or Description<br />"),e.first_name.length>50&&(t+="First Name cannot exceed 50 characters<br />"),e.last_name.length>50&&(t+="Last Name cannot exceed 50 characters<br />"),e.description.length>250&&(t+="Description cannot exceed 250 characters<br />"),e.email.length>100&&(t+="Email cannot exceed 100 characters<br />"),Ht.checkValidity()||(t+="Email is not valid<br />"),e.primary_phone.length>15?t+="Primary Phone cannot exceed 15 characters<br />":e.primary_phone.length>0&&!Qo.test(e.primary_phone)&&(t+="Primary Phone is not a valid phone number format<br />"),e.secondary_phone.length>15?t+="Secondary Phone cannot exceed 15 characters<br />":e.secondary_phone.length>0&&!Qo.test(e.secondary_phone)&&(t+="Secondary Phone is not a valid phone number format<br />"),e.street1.length>100&&(t+="Street 1 cannot exceed 100 characters<br />"),e.street2.length>100&&(t+="Street 2 cannot exceed 100 characters<br />"),e.city.length>100&&(t+="City cannot exceed 100 characters<br />"),e.zip.length>5&&(t+="Zip Code cannot exceed 5 characters<br />"),e.street1.length>100&&(t+="Street 1 cannot exceed 100 characters<br />"),t?($().toastmessage("showErrorToast",t),!1):!0}function d(){confirm("Deleting someone also deletes their attendance history. Continue?")&&v()}function u(){confirm("If you continue you will lose any unsaved changes. Continue?")&&(n(person),Ko=!0)}function p(){var e=$.trim(_o.value);""===e?$().toastmessage("showErrorToast","Must enter Name"):h(e)}function m(){var e=$.trim(_o.value);""===e?$().toastmessage("showErrorToast","Must enter Name"):f(e)}function h(e){$.ajax({type:"POST",url:"ajax/create_person.php",data:{person_display:e}}).done(function(e){var t=JSON.parse(e);t.success?x(t.person_id,t.person_name):1===t.error?logout():$().toastmessage("showErrorToast","Error loading visitors")}).fail(function(){$().toastmessage("showErrorToast","Error loading visitors")})}function f(e){$.ajax({type:"GET",url:"ajax/search.php",data:{search:e}}).done(function(e){var t=JSON.parse(e);t.success?L(t.people):1===t.error?logout():$().toastmessage("showErrorToast","Error loading visitors")}).fail(function(){$().toastmessage("showErrorToast","Error loading visitors")})}function y(){$.ajax({type:"GET",url:"ajax/states.json"}).done(function(n){if($.isArray(n))e(n);else{var r=JSON.parse(n);e(r)}o(),t()}).fail(function(){$().toastmessage("showErrorToast","Error loading states")})}function g(e){$.ajax({type:"POST",url:"ajax/save_person.php",data:{person:JSON.stringify(e)}}).done(function(t){var o=JSON.parse(t);o.success?(e.follow_ups=c(),e.relationships=s(),person=e,Ko=!0,i(e),$().toastmessage("showSuccessToast","Save successful")):1===o.error?logout():$().toastmessage("showErrorToast","Error saving person")}).fail(function(){$().toastmessage("showErrorToast","Error saving person")})}function v(){$.ajax({type:"POST",url:"ajax/delete_person.php",data:{id:person.id}}).done(function(e){var t=JSON.parse(e);t.success?window.location="attendance.php":1===t.error?logout():$().toastmessage("showErrorToast","Error deleting person")}).fail(function(){$().toastmessage("showErrorToast","Error deleting person")})}function _(e,t){$.ajax({type:"POST",url:"ajax/save_follow_up.php",data:{follow_up:JSON.stringify(e)}}).done(function(o){var n=JSON.parse(o);n.success?(e.id=n.follow_up_id,k(n.communication_card_options[0]),r(n.communication_card_options[0]),t.call(this,e),$().toastmessage("showSuccessToast","Follow up save successful")):1===n.error?logout():n.warning?$().toastmessage("showErrorToast",n.warning):$().toastmessage("showErrorToast","Error saving follow up")}).fail(function(){$().toastmessage("showErrorToast","Error saving follow up")})}function b(e){$.ajax({type:"POST",url:"ajax/delete_follow_up.php",data:{id:e,personId:person.id}}).done(function(t){var o=JSON.parse(t);o.success?($("#follow-up-table tr[follow_up_id="+e+"]").remove(),k(o.communication_card_options[0]),r(o.communication_card_options[0])):1===o.error?logout():o.warning?$().toastmessage("showErrorToast",o.warning):$().toastmessage("showErrorToast","Error deleting follow up")}).fail(function(){$().toastmessage("showErrorToast","Error deleting follow up")})}function k(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]="true"===e[t])}function w(e,t){$.ajax({type:"POST",url:"ajax/save_relationship.php",data:{relationship:JSON.stringify(e)}}).done(function(o){var n=JSON.parse(o);if(n.success)e.id=n.relationship_id,t.call(this,e),E(),$().toastmessage("showSuccessToast","Relationship save successful");else if(1===n.error)logout();else{var r="Error saving relationship";n.msg&&(r=n.msg),$().toastmessage("showErrorToast",r)}}).fail(function(){$().toastmessage("showErrorToast","Error saving relationship")})}function S(e){$.ajax({type:"POST",url:"ajax/delete_relationship.php",data:{id:e}}).done(function(t){var o=JSON.parse(t);o.success?($("#relationship-table tr[relationship_id="+e+"]").remove(),E()):1===o.error?logout():$().toastmessage("showErrorToast","Error deleting relationship")}).fail(function(){$().toastmessage("showErrorToast","Error deleting relationship")})}function q(){$.ajax({type:"POST",url:"ajax/copy_address_to_spouse.php",data:{personId:person.id}}).done(function(e){var t=JSON.parse(e);t.success?$().toastmessage("showSuccessToast","Address copied successful"):1===t.error?logout():$().toastmessage("showErrorToast","Error copying address")}).fail(function(){$().toastmessage("showErrorToast","Error copying address")})}function E(){ro.style.display=$("#relationship-table td[typecd=1]").length>0?"":"none"}function T(e){var t=e.currentTarget.parentElement.parentElement,o=t.getAttribute("person_id"),n=t.children[0].getAttribute("person_name");x(o,n)}function x(e,t){M(),mo.innerHTML='<a class="person_name" href="manage-person.php?id='+e+'">'+t+"</a>",mo.setAttribute("relationid",e),mo.setAttribute("person_name",t)}function A(e){var t=e.currentTarget.parentElement.parentElement,o=t.getAttribute("person_id");window.location="manage-person.php?id="+o}function L(e){$("a.person_name").off("click",T),$("button.search-button").off("click",A),$("#search-table tbody tr").remove();for(var t=0;t<e.length;t++)O(e[t]);$("a.person_name").on("click",T),$("button.search-button").on("click",A)}function O(e){var t=j(e);$("#search-table > tbody:last").append('<tr person_id="'+e.id+'"><td data-th="Name" person_name="'+t+'"><a class="person_name" href="javascript:void(0);">'+t+'</a></td><td data-th="Address">'+N(e)+'</td><td data-th="" class="search-table-button-col"><button class="search-button btn btn-xs btn-info">Manage</button></td></tr>')}function C(){yo.dialog("open")}function M(){yo.dialog("close")}function N(e){var t="";return t+=e.street1||"",e.street1&&(t+="<br />"),t+=e.street2||"",e.street2&&(t+="<br />"),t+=e.city||"",e.city&&e.state&&(t+=","),t+=" ",t+=e.state||"",t+=" ",t+=e.zip||"",t.trim()}function j(e,t){if(null===e)return"";var o="";return e.first_name||e.last_name?(e.last_name&&(o+=e.last_name),e.last_name&&e.first_name?t===!0?o+=", "+e.first_name:o=e.first_name+" "+o:e.first_name&&(o+=e.first_name+" ")):o=e.description,o}function P(){Oo.value="2",Co.value="",Co.disabled=!1,Mo.checked=!1,Bo.value="",Ho.checked=!1,Io.checked=!1,Jo.checked=!1,zo.checked=!1,Fo.checked=!1,Ro.checked=!1,Do.checked=!1,Uo.checked=!1,Yo.checked=!1,Go.checked=!1,Vo.checked=!1,pt();var e=$("#relationship-table td[typecd=1]");xo.style.display=e.length>0?"inherit":"none",Ao.checked=!0;for(var t=No.querySelectorAll("input"),o=0;o<t.length;o++)t[o].checked=!1}function H(){var e=$.trim(Co.value),t=$.trim(Oo.value),o=$.trim(Bo.value),n=[],r=[],i={frequency:jo.value,commitment_christ:!1,recommitment_christ:!1,commitment_tithe:!1,commitment_ministry:!1,commitment_baptism:!1,info_next:!1,info_gkids:!1,info_ggroups:!1,info_gteams:!1,info_member:!1,info_visit:!1},a="",c="";""!==o||1!=t&&2!=t||(a+="Must specify comments<br />"),""!==e||Mo.checked||(a+="Must specify a date or mark it unknown<br />"),o.length>5e3&&(a+="Comments cannot exceed 5000 characters<br />");for(var s=No.querySelectorAll("input"),l=0;l<s.length;l++)s[l].checked&&(n.push($.trim(s[l].nextSibling.innerHTML)),r.push(s[l].getAttribute("personid")));if(0===r.length&&(a+="Must specify a visitor<br />"),a)return $().toastmessage("showErrorToast",a),!1;var d=$("#relationship-table td[typecd=1]");return d.length>0&&Ao.checked&&-1===To.dialog("option","title").indexOf("Edit")&&(c=d.next()[0].getAttribute("relationid")),3==t&&(i={frequency:jo.value,commitment_christ:Ho.checked,recommitment_christ:Io.checked,commitment_tithe:Jo.checked,commitment_ministry:zo.checked,commitment_baptism:Fo.checked,info_next:Ro.checked,info_gkids:Do.checked,info_ggroups:Uo.checked,info_gteams:Yo.checked,info_member:Go.checked,info_visit:Vo.checked}),{id:-1===To.dialog("option","title").indexOf("Edit")?yt():Lo.value,personId:person.id,spouseId:c,date:e,typeCd:t,type:Oo.selectedOptions[0].text,comments:o,visitors:n,visitorsIds:r,communication_card_options:i}}function I(e){ft(),$("#follow-up-table tbody tr").remove();for(var t=0;t<e.length;t++)J(e[t]);ht()}function J(e){!e.type&&e.typeCd&&(e.type=tn[e.typeCd]||""),e.date=e.date||"";var t=[];for(var o in e.communication_card_options)e.communication_card_options.hasOwnProperty(o)&&e.communication_card_options[o]===!0&&t.push(o);$("#follow-up-table > tbody:last").append('<tr follow_up_id="'+e.id+'" communication_card_options="'+t.join(",")+'" frequency="'+e.communication_card_options.frequency+'"><td data-th="Type" typeCd="'+e.typeCd+'">'+e.type+'</td><td data-th="Date" class="follow-up-table-date-col">'+e.date+'</td><td data-th="By" visitorsIds="'+e.visitorsIds.join(",")+'">'+e.visitors.join(", ")+'</td><td data-th="Comments" class="follow-up-table-comments-col">'+e.comments+'</td><td data-th="" class="follow-up-table-button-col"><button class="edit-follow-up"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></button><button class="delete-follow-up"><span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></button></td></tr>')}function z(e){var t=$("#follow-up-table tr[follow_up_id="+e.id+"]"),o=t.children(),n=[];for(var r in e.communication_card_options)e.communication_card_options.hasOwnProperty(r)&&e.communication_card_options[r]===!0&&n.push(r);t[0].setAttribute("frequency",e.communication_card_options.frequency),t[0].setAttribute("communication_card_options",n.join(",")),o[0].setAttribute("typeCd",e.typeCd),o[0].innerHTML=e.type,o[1].innerHTML=e.date,o[2].innerHTML=e.visitors.join(", "),o[2].setAttribute("visitorsIds",e.visitorsIds.join(",")),o[3].innerHTML=e.comments}function F(e){ft(),$("#relationship-table tbody tr").remove();for(var t=0;t<e.length;t++)R(e[t]);ht()}function R(e){!e.type&&e.typeCd&&(e.type=on[e.typeCd]||""),$("#relationship-table > tbody:last").append('<tr relationship_id="'+e.id+'"><td data-th="Type" typeCd="'+e.typeCd+'">'+e.type+'</td><td data-th="Name" relationId="'+e.relation_id+'" relationname="'+e.name+'"><a class="person_name" href="manage-person.php?id='+e.relation_id+'">'+e.name+'</a></td><td data-th="" class="relationship-table-button-col"><button class="edit-relationship"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></button><button class="delete-relationship"><span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span></button></td></tr>')}function D(e){var t=$("#relationship-table tr[relationship_id="+e.id+"]").children();t[0].setAttribute("typeCd",e.typeCd),t[0].innerHTML=e.type,t[1].innerHTML=e.name}function U(){if(""===No.innerHTML.trim())for(var e,t=0;t<visitors.length;t++)e=visitors[t],No.innerHTML+='<div class="check-field"><input type="checkbox" personid="'+e.id+'" id="follow-up-by-'+e.id+'"/><label for="follow-up-by-'+e.id+'">'+j(e)+"</label></div>"}function Y(){io.dialog("open"),V(),io.dialog("option","title","Add Relationship"),so.innerHTML=j(person)}function G(){io.dialog("close")}function V(){co.value="1",mo.innerHTML="(Select a person)",mo.setAttribute("relationid",""),mo.setAttribute("person_name",""),ho.style.display="none"}function B(){var e=Q();return e===!1?!1:(w(e,function(e){R(e),$("button.edit-relationship:last").on("click",W),$("button.delete-relationship:last").on("click",X),io.dialog("close")}),void 0)}function Z(){var e=Q();return e===!1?!1:(w(e,function(e){D(e),io.dialog("close")}),void 0)}function K(){-1===io.dialog("option","title").indexOf("Edit")?B():Z()}function Q(){var e=$.trim(co.value),t=mo.getAttribute("relationid"),o="",n="";if(t?t==person.id&&(o+="Person cannot have a relationship with themself<br />"):o+="Must select a person<br />",o)return $().toastmessage("showErrorToast",o),!1;var r=$("#relationship-table td[typecd=1]");return r.length>0&&"2"===e&&fo.checked&&(n=r.next()[0].getAttribute("relationid")),{id:-1===io.dialog("option","title").indexOf("Edit")?gt():ao.value,spouseId:n,typeCd:e,type:co.selectedOptions[0].text,person_id:person.id,relation_id:t,name:mo.getAttribute("person_name")}}function W(e){io.dialog("open");var t=e.currentTarget.parentElement.parentElement;co.value=t.children[0].getAttribute("typeCd")||"",ao.value=t.getAttribute("relationship_id"),x(t.children[1].getAttribute("relationid"),t.children[1].getAttribute("relationname")),io.dialog("option","title","Edit Relationship")}function X(e){if(confirm("Are you sure you would like to PERMANENTLY delete this Relationship?")){var t=e.currentTarget.parentElement.parentElement.getAttribute("relationship_id");S(t)}}function et(){To.dialog("open"),P(),U(),To.dialog("option","title","Add Follow Up")}function tt(){To.dialog("close")}function ot(e){var t=H();return t===!1?!1:(_(t,function(t){J(t),$("button.edit-follow-up:last").on("click",ct),$("button.delete-follow-up:last").on("click",st),Ko=!1,e.call(this)}),void 0)}function nt(e){var t=H();return t===!1?!1:(_(t,function(t){z(t),Ko=!1,e.call(this)}),void 0)}function rt(){-1===To.dialog("option","title").indexOf("Edit")?ot():nt()}function it(){-1===To.dialog("option","title").indexOf("Edit")?ot(P):nt(P)}function at(){-1===To.dialog("option","title").indexOf("Edit")?ot(tt):nt(tt)}function ct(e){To.dialog("open"),xo.style.display="none",U();var t,o=e.currentTarget.parentElement.parentElement,n=o.children[1].innerHTML||"",r=(o.getAttribute("communication_card_options")||"").split(","),i={commitment_christ:!1,recommitment_christ:!1,commitment_tithe:!1,commitment_ministry:!1,commitment_baptism:!1,info_next:!1,info_gkids:!1,info_ggroups:!1,info_gteams:!1,info_member:!1,info_visit:!1};for(t=0;t<r.length;t++)i[r[t]]=!0;jo.value=o.getAttribute("frequency")||"",Oo.value=o.children[0].getAttribute("typeCd")||"",Co.value=n,Bo.value=o.children[3].innerHTML||"",Lo.value=o.getAttribute("follow_up_id"),Mo.checked=""===n,Ho.checked=i.commitment_christ,Io.checked=i.recommitment_christ,Jo.checked=i.commitment_tithe,zo.checked=i.commitment_ministry,Fo.checked=i.commitment_baptism,Ro.checked=i.info_next,Do.checked=i.info_gkids,Uo.checked=i.info_ggroups,Yo.checked=i.info_gteams,Go.checked=i.info_member,Vo.checked=i.info_visit,Co.disabled=Mo.checked;var a=o.children[2].getAttribute("visitorsIds")||"",c=a.split(","),s=No.querySelectorAll("input");for(t=0;t<s.length;t++)s[t].checked=c.indexOf(s[t].getAttribute("personid"))>=0;pt(),To.dialog("option","title","Edit Follow Up")}function st(e){if(confirm("Are you sure you would like to PERMANENTLY delete this Follow Up?")){var t=e.currentTarget.parentElement.parentElement.getAttribute("follow_up_id");b(t)}}function lt(e){var t="";return t+=e.street1||"",t+=" ",t+=e.street2||"",t+=" ",t+=e.city||"",t+=" ",t+=e.state||"",t+=" ",t+=e.zip||"",t.trim()}function dt(e){Co.disabled=e.currentTarget.checked,Co.value=""}function ut(){var e=$.trim(co.value);if("2"===e){var t=$("#relationship-table td[typecd=1]");ho.style.display=t.length>0?"inherit":"none",fo.checked=!0}else ho.style.display="none"}function pt(){$("#follow-up-frequency-container").css("display",3==Oo.value?"inherit":"none"),Po.style.display=3==Oo.value?"inherit":"none"}function mt(e){Ko||confirm("If you continue you will lose any unsaved changes. Continue?")||e.preventDefault()}function ht(){$("#attendance-nav").on("click",mt),$("#reports-nav").on("click",mt),$("button.edit-follow-up").on("click",ct),$("button.delete-follow-up").on("click",st),$("button.edit-relationship").on("click",W),$("button.delete-relationship").on("click",X)}function ft(){$("#attendance-nav").off("click",mt),$("#reports-nav").off("click",mt),$("button.edit-follow-up").off("click",ct),$("button.delete-follow-up").off("click",st),$("button.edit-relationship").off("click",W),$("button.delete-relationship").off("click",X)}function yt(){return Zo--}function gt(){return wo--}function vt(e){if(e=e||"",null===e.match(/\D/g,"")){var t=e.replace(/\D/g);7===t.length?e=t.substr(0,3)+"-"+t.substr(3):10===t.length&&(e="("+t.substr(0,3)+") "+t.substr(3,3)+"-"+t.substr(6))}return e}$("#follow-up-date").datepicker(),$("#first-visit").datepicker();var _t={},bt=document.querySelector("#first-name"),kt=document.querySelector("#last-name"),wt=document.querySelector("#description"),$t=document.querySelector("#first-visit"),St=document.querySelector("#first-recorded-visit"),qt=document.querySelector("#attender-status"),Et=document.querySelector("#adult"),Tt=document.querySelector("#active"),xt=document.querySelector("#baptized"),At=document.querySelector("#saved"),Lt=document.querySelector("#visitor"),Ot=document.querySelector("#assigned-agent"),Ct=document.querySelector("#starting-point-notified"),Mt=document.querySelector("#street1"),Nt=document.querySelector("#street2"),jt=document.querySelector("#city"),Pt=document.querySelector("#zip"),Ht=document.querySelector("#email"),It=document.querySelector("#primary-phone"),Jt=document.querySelector("#secondary-phone"),zt=document.querySelector("#primary-phone-type"),Ft=document.querySelector("#secondary-phone-type"),Rt=document.querySelector("#state"),Dt=document.querySelector("#commitment-christ"),Ut=document.querySelector("#recommitment-christ"),Yt=document.querySelector("#commitment-tithe"),Gt=document.querySelector("#commitment-ministry"),Vt=document.querySelector("#commitment-baptism"),Bt=document.querySelector("#info-next"),Zt=document.querySelector("#info-gkids"),Kt=document.querySelector("#info-ggroups"),Qt=document.querySelector("#info-gteams"),Wt=document.querySelector("#info-member"),Xt=document.querySelector("#info-visit"),eo=document.querySelector("#update"),to=document.querySelector("#cancel"),oo=document.querySelector("#delete"),no=document.querySelector("#add-follow-up"),ro=document.querySelector("#copy-address-to-spouse"),io=$(".manage-person-relationship-form").dialog({autoOpen:!1,height:400,width:350,modal:!0,open:function(){$("body").css({overflow:"hidden"})},beforeClose:function(){$("body").css({overflow:"inherit"})}}),ao=io[0].querySelector("#relationship-id"),co=io[0].querySelector("#relationship-type"),so=io[0].querySelector("#relationship-person-name"),lo=document.querySelector("#add-relationship"),uo=document.querySelector("#add-close-relationship"),po=document.querySelector("#close-relationship"),mo=document.querySelector("#relationship-relation"),ho=io[0].querySelector("#add-to-spouse-container-relationship"),fo=io[0].querySelector("#add-to-spouse-relationship"),yo=$(".select-person-form").dialog({autoOpen:!1,height:400,width:350,modal:!0,open:function(){$("body").css({overflow:"hidden"})},beforeClose:function(){$("body").css({overflow:"inherit"})}}),go=document.querySelector("#add-new-person"),vo=document.querySelector("#search"),_o=document.querySelector("#search-name"),bo=yo[0].querySelector("#close-select-person"),ko=document.querySelector("#select-person-btn"),wo=-1,$o=document.querySelector("#add-clear"),So=document.querySelector("#add-copy"),qo=document.querySelector("#add-close"),Eo=document.querySelector("#close"),To=$(".manage-person-follow-up-form").dialog({autoOpen:!1,height:410,width:350,modal:!0,open:function(){$("body").css({overflow:"hidden"})},beforeClose:function(){$("body").css({overflow:"inherit"})}}),xo=To[0].querySelector("#add-to-spouse-container-follow-up"),Ao=To[0].querySelector("#add-to-spouse-follow-up"),Lo=To[0].querySelector("#follow-up-id"),Oo=To[0].querySelector("#follow-up-type"),Co=To[0].querySelector("#follow-up-date"),Mo=document.querySelector("#manage-unknown-date"),No=To[0].querySelector("#follow-up-visitors"),jo=To[0].querySelector("#follow-up-frequency"),Po=To[0].querySelector(".communication-card-options"),Ho=To[0].querySelector("#follow-up-commitment-christ"),Io=To[0].querySelector("#follow-up-recommitment-christ"),Jo=To[0].querySelector("#follow-up-commitment-tithe"),zo=To[0].querySelector("#follow-up-commitment-ministry"),Fo=To[0].querySelector("#follow-up-commitment-baptism"),Ro=To[0].querySelector("#follow-up-info-next"),Do=To[0].querySelector("#follow-up-info-gkids"),Uo=To[0].querySelector("#follow-up-info-ggroups"),Yo=To[0].querySelector("#follow-up-info-gteams"),Go=To[0].querySelector("#follow-up-info-member"),Vo=To[0].querySelector("#follow-up-info-visit"),Bo=To[0].querySelector("#follow-up-comments"),Zo=-1,Ko=!0,Qo=/^((\(?([2-9][0-8][0-9])\))|([2-9][0-8][0-9]))?[-. ]?([2-9][0-9]{2})[-. ]?([0-9]{4})$/,Wo=document.querySelector("#map-panel"),Xo="//maps.googleapis.com/maps/api/staticmap?zoom=11&size=400x400&markers=color:red%7Clabel:A|",en="https://www.google.com/maps/place/",tn={1:"Phone Call",2:"Visit",3:"Communication Card",4:"Entered in The City",5:"Thank You Card Sent"},on={1:"Spouse",2:"Child",3:"Parent"},nn={1:"Member",2:"Regular",3:"Irregular"},rn={1:"1st Time",2:"2nd Time",3:"Often",4:"Member","":"--None Provided--"};(window.onpopstate=function(){var e,t=/\+/g,o=/([^&=]+)=?([^&]*)/g,n=function(e){return decodeURIComponent(e.replace(t," "))},r=window.location.search.substring(1);for(_t={};null!==(e=o.exec(r));)_t[n(e[1])]=n(e[2])}).call(),_t.id||(window.location="attendance.php"),eo.addEventListener("click",a),to.addEventListener("click",u),oo.addEventListener("click",d),no.addEventListener("click",et),So.addEventListener("click",rt),$o.addEventListener("click",it),qo.addEventListener("click",at),Eo.addEventListener("click",tt),ro.addEventListener("click",q),$("#follow-up-type").on("change",pt),lo.addEventListener("click",Y),uo.addEventListener("click",K),po.addEventListener("click",G),$("#relationship-type").on("change",ut),ko.addEventListener("click",C),go.addEventListener("click",p),vo.addEventListener("click",m),_o.addEventListener("keydown",function(e){13==e.keyCode&&m()}),bo.addEventListener("click",M),$("#manage-unknown-date").on("change",dt),y(),n(person)}();